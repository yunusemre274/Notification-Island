<Window x:Class="NI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:NI.Views"
        Title="Dynamic Island" 
        Width="750" Height="500"
        WindowStyle="None" 
        AllowsTransparency="True" 
        Background="Transparent"
        Topmost="False"
        ShowInTaskbar="False" 
        ResizeMode="NoResize" 
        ShowActivated="False"
        WindowStartupLocation="Manual">

    <Grid x:Name="RootGrid">
        <!-- Island Bar (SINGLE SOURCE OF TRUTH) -->
        <views:IslandView x:Name="Island"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Top"
                          Panel.ZIndex="5000"/>

        <!-- Overlay Layer for Panels (Z-Index 9999) -->
        <Grid x:Name="OverlayLayer"
              VerticalAlignment="Top"
              HorizontalAlignment="Center"
              Margin="0,60,0,0"
              Panel.ZIndex="9999"
              Visibility="Collapsed"
              IsHitTestVisible="False">
            <!-- Control Center panels will be added dynamically -->
        </Grid>
        
        <!-- Click-away backdrop (invisible, catches clicks outside panel) -->
        <Border x:Name="ClickAwayBackdrop"
                Background="Transparent"
                Panel.ZIndex="4999"
                Visibility="Collapsed"
                MouseLeftButtonDown="OnBackdropClick"/>
    </Grid>
</Window>
